(function(a){this.ElementFilter=new Class({Implements:[Options,Events],options:{cache:true,caseSensitive:false,ignoreKeys:[13,27,32,37,38,39,40],matchAnywhere:true,property:"text",trigger:"mouseup",onStart:$empty,onShow:$empty,onHide:$empty,onComplete:$empty},initialize:function(d,c,b){this.setOptions(b);this.observeElement=document.id(d);this.elements=$$(c);this.matches=this.elements;this.misses=[];this.listen();},listen:function(){this.observeElement.addEvent(this.options.trigger,function(b){if(this.observeElement.value.length){if(!this.options.ignoreKeys.contains(b.code)){this.fireEvent("start");this.findMatches(this.options.cache?this.matches:this.elements);this.fireEvent("complete");}}else{this.findMatches(this.elements,false);}}.bind(this));},findMatches:function(g,c){var f=this.observeElement.value;var b=this.options.matchAnywhere?f:"^"+f;var h=this.options.caseSensitive?"":"i";var d=new RegExp(b,h);var e=[];g.each(function(j){var i=(c==undefined?d.test(j.get(this.options.property)):c);if(i){if(!j.retrieve("showing")){this.fireEvent("show",[j]);}e.push(j);j.store("showing",true);}else{if(j.retrieve("showing")){this.fireEvent("hide",[j]);}j.store("showing",false);}return true;}.bind(this));return e;}});})(document.id);